/*O(NM) と思っていい?NMM/32くらいかな?縦がM,横(var)がN縦M に　= 0or1 が並んでる*/const int MAX_N=,MAX_M=;typedef bitset<MAX_N> Bs;typedef vector<Bs> mat;int getrank(int N, int M, mat a, vector<int> b){	int ans=0;	bool used[MAX_M]={};	rep(j,N){		int i=0;		while( (i < M) && (used[i] || !a[i][j]) ) i++;		if(i == M) continue;		ans++;		used[i] = 1;		rep(k,M) if(!used[k]&&a[k][j]){			a[k]^=a[i];			b[k]^=b[i];		}	}	rep(i,M) if(!used[i] && b[i] ) return -1;	return ans;}int main(){	int N,M;	cin>>N>>M;	mat a(M);	vector<int> b(M);	rep(i,M){		rep(j,N){			bool x;			cin>>x;			a[i][j]=x;		}		cin>>b[i];	}	int r=getrank(N,M,a,b);	if(r==-1) puts("0");	else{		int x=1;		rep(i,N-r) x*=2;		cout<<x<<endl;	}}